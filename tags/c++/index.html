<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>c++ | Get stronger one day at a time.</title><meta name=keywords content><meta name=description content="1日ひとつ強くなる42Tokyo生の個人ブログです。"><meta name=author content><link rel=canonical href=https://public-jun.github.io/tags/c++/><link crossorigin=anonymous href=/assets/css/stylesheet.min.a6bf45c73ef0e15893841e307fbc4cae4dadffd778692cf5d3abdd8694a9910e.css integrity="sha256-pr9Fxz7w4ViThB4wf7xMrk2t/9d4aSz106vdhpSpkQ4=" rel="preload stylesheet" as=style><link rel=icon href=https://public-jun.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://public-jun.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://public-jun.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://public-jun.github.io/apple-touch-icon.png><link rel=mask-icon href=https://public-jun.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><link rel=alternate type=application/rss+xml href=https://public-jun.github.io/tags/c++/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-1VL8593G1N"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1VL8593G1N",{anonymize_ip:!1})}</script><meta property="og:title" content="c++"><meta property="og:description" content="1日ひとつ強くなる42Tokyo生の個人ブログです。"><meta property="og:type" content="website"><meta property="og:url" content="https://public-jun.github.io/tags/c++/"><meta property="og:image" content="https://public-jun.github.io/first-blog-card-fs8.png"><meta property="og:site_name" content="jnakahod's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://public-jun.github.io/first-blog-card-fs8.png"><meta name=twitter:title content="c++"><meta name=twitter:description content="1日ひとつ強くなる42Tokyo生の個人ブログです。"><meta name=google-site-verification content="E5b3YATxpHh_A3m3S9muzf6zlijSmgyzjmoxdBnz_OE"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://public-jun.github.io/ accesskey=h title="Get stronger one day at a time. (Alt + H)">Get stronger one day at a time.</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://public-jun.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://public-jun.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://public-jun.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://public-jun.github.io/series/ title=Series><span>Series</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://public-jun.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://public-jun.github.io/tags/>Tags</a></div><h1>c++</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>c++98で自作 vector (2)</h2></header><div class=entry-content><p>1. はじめに 前回の基礎知識編の続き、実装編(2)です。 この記事では、vectorのイテレータを作ります。
2. 概要を掴む 実装のイメージをつけるために、江添亮のC++入門のstd::arrayから vectorの実装 : メモリー確保までを写経しました。
この資料ではイテレータをポインタのエイリアスで実装しています。
llvm や gcc はイテレータを用意しているので、最終的にはポインタで操作しているところをイテレータに置き換えていきます。
3. イテレータ実装 自作 vector は ftという名前空間に作ります。
iterator_traits iterator_traits.hpp
#ifndef ITERATOR_TRAITS_HPP #define ITERATOR_TRAITS_HPP #include &lt;cstddef> // ptrdiff_t #include &lt;iterator> namespace ft { /// primary iterator_traits template &lt;class Iterator> struct iterator_traits { typedef typename Iterator::difference_type difference_type; typedef typename Iterator::value_type value_type; typedef typename Iterator::pointer pointer; typedef typename Iterator::reference reference; typedef typename Iterator::iterator_category iterator_category; }; /// Partial specialization for pointer types template &lt;class T> struct iterator_traits&lt;T*> { typedef ptrdiff_t difference_type; typedef T value_type; typedef T* pointer; typedef T& reference; typedef std::random_access_iterator_tag iterator_category; }; /// Partial specialization for const pointer types....</p></div><footer class=entry-footer><span title='2022-04-14 21:48:22 +0900 +0900'>April 14, 2022</span></footer><a class=entry-link aria-label="post link to c++98で自作 vector (2)" href=https://public-jun.github.io/cpp-my-vector2/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>c++98で自作 vector (1)</h2></header><div class=entry-content><p>1. はじめに c++98 で STL コンテナの vector(c++98 ver) を自作していきます。
完成形は cppreferece 、 C++ Reference の vector を目指します。
2. 基礎知識編 コンテナ クラスや構造体、基本型(int, charなど)を保持するデータ構造(入れ物)。
vector や map 、stack 、set などデータ保持の方法は、用途に合わせて様々なものが提供されています。
イテレータ コンテナの個々の要素を参照するためのクラスです。
この特徴から、イテレータは ポインタを抽象化したクラス と捉えることもできます。しかし、全てのイテレータがポインタの全機能を備えているわけではありません。
後述するアルゴリズムはコンテナのイテレータを用いて、コンテナを操作することができます。 イテレータがコンテナとアルゴリズムを媒介するインターフェースになることで、異なるデータ構造にも関わらす、コンテナを操作することができます。
イテレータを用いて要素の移動、参照、変更が行えます。
ポインタのように *iterator と * をつけることで、要素への参照が可能です。 ++iterator とすると、次の要素を指します。 これらの操作はイテレータの種類によっても異なります。(wikiより)
InputIterator(入力イテレータ) 要素への 読み取り専用 アクセスを提供するイテレータ。 要素への読み取りが可能であれば、InputIterator とみなせます。(istream_iteratorなど) OutputIterator(出力イテレータ) 要素への 書き込み専用 アクセスを提供するイテレータ。 要素への書き込みが可能であれば、OutputIterator とみなせます。(ostream_iteratorなど) ForwardIterator(前方向イテレータ) 一旦前に進めると、逆方向には戻れない イテレータ。 要素への読み取り、書き込みが可能であれば、ForwardIterator とみなせます。(単方向リストのコンテナのイテレータなど) BidirectionalIterator(双方向イテレータ) 前方、後方どちらにも進める 機能を持つイテレータ。 前方向イテレータの要件に加えて、デクリメント(- -)が可能であれば、 BidrectionalIterator とみなせます。(list、set、multiset、map、multimapのコンテナのイテレータなど) RandomAccessIterator(ランダムアクセスイテレータ) ポインタのように ランダムにアクセスが行える イテレータ。 BidirectionalIterator の要件に加え、算術演算(+, -, +=, -=)が可能であれば RandomAccessIterator とみなせます。(vector、array、dequeのイテレータなど) 全てのイテレータはインクリメント(++)、等号比較(it1 !...</p></div><footer class=entry-footer><span title='2022-03-26 15:28:14 +0900 +0900'>March 26, 2022</span></footer><a class=entry-link aria-label="post link to c++98で自作 vector (1)" href=https://public-jun.github.io/cpp-my-vector1/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>enable_if 作ってみた</h2></header><div class=entry-content><p>1. はじめに c++98 で STL コンテナを自作するときに enable_if を実装する必要があったので今回はそのまとめです。あくまで、c++98 ベースで作っていきます。
前回の is_integral を使うので、場合によっては参照してください。
2. SFINAE とは cpprefjp より引用
「SFINAE (Substitution Failure Is Not An Errorの略称、スフィネェと読む)」は、テンプレートの置き換えに失敗した際に、即時にコンパイルエラーとはせず、置き換えに失敗した関数をオーバーロード解決の候補から除外するという言語機能である。
テンプレート引数の展開に不正があっても、エラーにはならず候補から外され、コンパイルは続行される。
残った候補の中から置き換えに成功したものを実行する。
struct Test { typedef void type; }; template &lt;typename T> void f(typename T::type) {} // 定義#1 template &lt;typename T> void f(T) {} // 定義#2 int main() { f&lt;Test>(10); // 定義#1 の呼び出し f&lt;int>(10); // 定義#2 の呼び出し } f&lt;Test>(10) について、Test::type が存在するので 定義1 が実体化する。 f&lt;int>(10) について、int型は int::type が存在しないので 定義1 が候補から除外され、 定義2 が実体化される。 このようにテンプレート実引数の型を調べて、実体化するテンプレート定義を決定することができる特徴がある。...</p></div><footer class=entry-footer><span title='2022-02-24 21:28:39 +0900 +0900'>February 24, 2022</span></footer><a class=entry-link aria-label="post link to enable_if 作ってみた" href=https://public-jun.github.io/cpp-enable-if/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>c++98 で is_integral 実装</h2></header><div class=entry-content><p>1. はじめに c++98 で STL コンテナを自作するときに is_integral を実装する必要があったので今回はそのまとめです。
2. is_integral とは cppreference.com より //Defined in header &lt;type_traits> namespace std { template &lt;class T> struct is_integral; template &lt;class T> inline constexpr bool is_integral_v = is_integral&lt;T>::value; // C++17 } Checks whether T is an integral type. Provides the member constant value which is equal to true, if T is the type bool, char, char8_t (since C++20), char16_t, char32_t, wchar_t, short, int, long, long long, or any implementation-defined extended integer types, including any signed, unsigned, and cv-qualified variants....</p></div><footer class=entry-footer><span title='2022-02-23 13:37:59 +0900 +0900'>February 23, 2022</span></footer><a class=entry-link aria-label="post link to c++98 で is_integral 実装" href=https://public-jun.github.io/cpp-is-integral/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>c++ における typename とは</h2></header><div class=entry-content><p>1. はじめに STL コンテナを自作している時、 typename の使い方をしっかり理解していなかったので自分なりにまとめてみました。
2. typename とは cppreference.com typename の説明より
In the template parameter list of a template declaration, typename can be used as an alternative to class to declare type template parameters . Inside a declaration or a definition of a template, typename can be used to declare that a dependent qualified name is a type. c++ のテンプレート宣言時には、型名を明示する際に class の代わりに typename を使用してテンプレートパラメータを宣言することができます。 template&lt;typename T> void f() {} template&lt;class T> void f() {} これはどちらでもコンパイルが通ります。...</p></div><footer class=entry-footer><span title='2022-02-13 19:19:37 +0900 +0900'>February 13, 2022</span></footer><a class=entry-link aria-label="post link to c++ における typename とは" href=https://public-jun.github.io/cpp-typename/></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://public-jun.github.io/>Get stronger one day at a time.</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>